{% extends 'base.html.twig' %}

{% block title %}NAV-SYSTEMS // Operating Manual{% endblock %}

{% block pageContent %}
    {% embed 'components/_hero_header.html.twig' with {
        icon: 'icons/waypoint.html.twig',
        title: 'NAV-SYSTEMS // OPERATING MANUAL',
        description: 'Imperial Navy Standard // Navigation Protocol & Logic Cursor Management v4.2'
    } %}
        {% block actions %}
            <a href="{{ path('app_route_index') }}" class="btn btn-outline btn-sm font-orbitron tracking-widest uppercase border-slate-700 hover:border-slate-500">
                {% include 'icons/back.html.twig' with { dim: 16 } %}
                Back to Archives
            </a>
        {% endblock %}
    {% endembed %}

    <div class="w-full mt-8 pb-32 px-4 md:px-8 lg:px-12 overflow-x-hidden text-slate-300">
        <main class="space-y-24">
            <!-- 1. System Overview & Architecture -->
            <section id="overview" class="scroll-mt-24">
                <div class="flex items-center gap-4 mb-8">
                    <div class="w-12 h-12 rounded-lg bg-cyan-500/10 border border-cyan-500/30 flex items-center justify-center font-orbitron text-xl text-cyan-500 shadow-[0_0_15px_rgba(6,182,212,0.2)]">01</div>
                    <h2 class="font-orbitron text-2xl font-bold text-white uppercase tracking-[0.2em]">System Architecture & Logic</h2>
                </div>
                
                <div class="grid grid-cols-1 xl:grid-cols-4 gap-12 mb-12">
                    <div class="xl:col-span-3 space-y-6 font-rajdhani text-lg text-slate-400">
                        <p>
                            The operational core of <strong>Nav-Fi&sup3;</strong> is the <em>Recursive Navigation Engine</em> (RNE), a data processing system synchronized with the <strong>TravellerMap</strong> Imperial database. Every route stored in the system is not merely a list of coordinates, but a deterministic graph of jump vectors.
                        </p>
                        <p>
                            The architecture is built upon the concept of <strong>Navigational Determinism</strong>: once a route is compiled and validated, physical parameters (fuel, time, distance) become immutable until manual recalculation or link termination.
                        </p>
                    </div>
                    <div class="p-8 rounded-xl border border-slate-800 bg-slate-900/40 space-y-6 h-fit">
                        <h4 class="font-orbitron text-[10px] text-cyan-400 uppercase tracking-widest border-b border-cyan-500/20 pb-2">Technical Specs</h4>
                        <div class="space-y-3 text-xs font-mono">
                            <div class="flex justify-between border-b border-slate-800 pb-1"><span class="text-slate-500">Protocol:</span> <span class="text-cyan-200">NVF-3.7.4-IMP</span></div>
                            <div class="flex justify-between border-b border-slate-800 pb-1"><span class="text-slate-500">API Sync:</span> <span class="text-cyan-200">TravellerMap v2</span></div>
                            <div class="flex justify-between border-b border-slate-800 pb-1"><span class="text-slate-500">Coordinate:</span> <span class="text-cyan-200">Hex/Sector Standard</span></div>
                            <div class="flex justify-between border-b border-slate-800 pb-1"><span class="text-slate-500">Time Unit:</span> <span class="text-cyan-200">Imperial Standard Day</span></div>
                            <div class="flex justify-between"><span class="text-slate-500">Security:</span> <span class="text-emerald-400">ENCRYPTED_LINK</span></div>
                        </div>
                    </div>
                </div>

                <div class="bg-slate-900/50 border border-slate-800 rounded-3xl p-10 shadow-inner font-rajdhani">
                    <h3 class="font-orbitron text-sm text-slate-200 uppercase tracking-widest mb-8 flex items-center gap-3">
                        <span class="w-2 h-2 rounded-full bg-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.8)]"></span>
                        Data Synchronization Logic
                    </h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-12 text-sm leading-relaxed">
                        <div class="space-y-3 group">
                            <span class="text-cyan-500 font-bold block uppercase text-[10px] group-hover:text-cyan-400 transition-colors tracking-widest">Jump Distance Matrix</span>
                            <div class="h-px w-8 bg-cyan-500/30 mb-2"></div>
                            <p class="text-slate-500 uppercase tracking-tighter">Calculated based on Euclidean distance between hex centers, respecting strict sector boundaries and Imperial parsecs.</p>
                        </div>
                        <div class="space-y-3 group text-center">
                            <span class="text-cyan-500 font-bold block uppercase text-[10px] group-hover:text-cyan-400 transition-colors tracking-widest">World Lookup Engine</span>
                            <div class="h-px w-8 bg-cyan-500/30 mb-2 mx-auto"></div>
                            <p class="text-slate-500 uppercase tracking-tighter">Queries the OTU API to extract UWP, Importance, and Hazard Zones (Amber/Red) in real-time for every jump point.</p>
                        </div>
                        <div class="space-y-3 group text-center">
                            <span class="text-cyan-500 font-bold block uppercase text-[10px] group-hover:text-cyan-400 transition-colors tracking-widest">A* Path Optimization</span>
                            <div class="h-px w-8 bg-cyan-500/30 mb-2 mx-auto"></div>
                            <p class="text-slate-500 uppercase tracking-tighter">Advanced A* algorithm implementation with heuristics based on the asset's specific J-X drive capabilities.</p>
                        </div>
                        <div class="space-y-3 group text-right">
                            <span class="text-cyan-500 font-bold block uppercase text-[10px] group-hover:text-cyan-400 transition-colors tracking-widest">Temporal Session Drift</span>
                            <div class="h-px w-8 bg-cyan-500/30 mb-2 ml-auto"></div>
                            <p class="text-slate-500 uppercase tracking-tighter">Maintains Imperial Date consistency across different navigation sessions, tracking every week of layover or travel.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 2. Nav-Link Status Lifecycle -->
            <section id="logic" class="scroll-mt-24 mt-8">
                <div class="flex items-center gap-4 mb-8">
                    <div class="w-12 h-12 rounded-lg bg-emerald-500/10 border border-emerald-500/30 flex items-center justify-center font-orbitron text-xl text-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.2)]">02</div>
                    <h2 class="font-orbitron text-2xl font-bold text-white uppercase tracking-[0.2em]">Nav-Link Status Lifecycle</h2>
                </div>
                
                <div class="space-y-8 font-rajdhani">
                    <p class="text-lg text-slate-400 max-w-4xl">
                        The system operates in two mutually exclusive modes tied to the navigation hardware. Understanding the transition between these states is vital for crew safety.
                    </p>

                    <div class="relative py-12">
                        <!-- Connecting Line -->
                        <div class="absolute top-1/2 left-0 w-full h-[2px] bg-gradient-to-r from-transparent via-slate-800 to-transparent -translate-y-1/2 hidden md:block"></div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-16 relative">
                            <!-- State 1: Standby -->
                            <div class="group bg-slate-950 border border-slate-800 p-10 rounded-3xl relative transition-all hover:border-amber-500/30">
                                <span class="absolute -top-3 left-10 px-4 bg-amber-500 text-slate-950 font-orbitron text-[10px] font-bold uppercase tracking-widest rounded-full shadow-[0_0_12px_rgba(245,158,11,0.4)]">Status: STANDBY</span>
                                <h4 class="font-orbitron text-xs text-white uppercase mb-6 tracking-widest">PLANNING_MODE</h4>
                                <ul class="text-sm text-slate-500 space-y-4 uppercase leading-relaxed font-bold tracking-tight">
                                    <li class="flex items-center gap-2 italic"><span class="w-1.5 h-1.5 bg-amber-500 rounded-full"></span> <span class="text-slate-300">Mutable Waypoints</span></li>
                                    <li class="flex items-center gap-2 italic"><span class="w-1.5 h-1.5 bg-amber-500 rounded-full"></span> <span class="text-slate-300">A* Jump Recalculation</span></li>
                                    <li class="flex items-center gap-2 italic"><span class="w-1.5 h-1.5 bg-amber-500 rounded-full"></span> <span class="text-slate-300">Manual Cursor Sync</span></li>
                                    <li class="flex items-center gap-2 italic"><span class="w-1.5 h-1.5 bg-amber-500 rounded-full"></span> <span class="text-slate-300">Fuel Simulation</span></li>
                                </ul>
                            </div>

                            <!-- Transition Command -->
                            <div class="flex flex-col items-center justify-center gap-4">
                                <div class="w-14 h-14 rounded-full bg-slate-900 flex items-center justify-center text-cyan-500 border border-cyan-500/30 shadow-[0_0_20px_rgba(6,182,212,0.1)] group">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="group-hover:translate-x-1 transition-transform"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
                                </div>
                                <span class="font-orbitron text-[10px] text-slate-500 uppercase font-bold tracking-[0.4em] bg-slate-950 px-3 py-1 border border-slate-800 rounded">INITIATE</span>
                            </div>

                            <!-- State 2: Engaged -->
                            <div class="group bg-emerald-950/10 border border-emerald-500/20 p-10 rounded-3xl relative shadow-[0_0_40px_rgba(16,185,129,0.08)] transition-all hover:border-emerald-500/40">
                                <span class="absolute -top-3 left-10 px-4 bg-emerald-500 text-slate-950 font-orbitron text-[10px] font-bold uppercase tracking-widest rounded-full shadow-[0_0_12px_rgba(16,185,129,0.4)]">Status: ENGAGED</span>
                                <h4 class="font-orbitron text-xs text-emerald-400 uppercase mb-6 tracking-widest">NAV_SYNC_ACTIVE</h4>
                                <ul class="text-sm text-slate-400 space-y-4 uppercase leading-relaxed font-bold tracking-tight">
                                    <li class="flex items-center gap-2 italic"><span class="w-1.5 h-1.5 bg-emerald-500 rounded-full"></span> <span class="text-white">Immutable Vector Graph</span></li>
                                    <li class="flex items-center gap-2 italic"><span class="w-1.5 h-1.5 bg-emerald-500 rounded-full"></span> <span class="text-white">Transit Control HUD</span></li>
                                    <li class="flex items-center gap-2 italic"><span class="w-1.5 h-1.5 bg-emerald-500 rounded-full"></span> <span class="text-white">Seven-Day Temporal Leap</span></li>
                                    <li class="flex items-center gap-2 italic"><span class="w-1.5 h-1.5 bg-emerald-500 rounded-full"></span> <span class="text-white">Bookmark Auto-Update</span></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 3. Operational Protocols -->
            <section id="activation" class="scroll-mt-24">
                <div class="flex items-center gap-4 mb-8">
                    <div class="w-12 h-12 rounded-lg bg-cyan-500/10 border border-cyan-500/30 flex items-center justify-center font-orbitron text-xl text-cyan-500 shadow-[0_0_15px_rgba(6,182,212,0.2)]">03</div>
                    <h2 class="font-orbitron text-2xl font-bold text-white uppercase tracking-[0.2em]">Operational Protocols</h2>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-16 font-rajdhani">
                    <div class="space-y-8 p-8 rounded-3xl bg-slate-900/20 border border-slate-800 hover:bg-slate-900/30 transition-all">
                        <h3 class="font-orbitron text-sm text-cyan-400 uppercase tracking-widest border-b border-cyan-500/20 pb-4">Protocol Delta: Manual Cursor Sync</h3>
                        <p class="text-slate-400 text-lg leading-relaxed">
                            When the route is inactive, the navigator has exclusive access to the <strong>Manual Override</strong>. This function instantly synchronizes the virtual position with a waypoint loaded in the table.
                        </p>
                        <p class="text-slate-500 italic text-sm">
                            Use this function strictly to realign the Nav-Computer in the event of forced jumps, stellar emergencies, or when the vessel is towed off-course.
                        </p>
                        <div class="p-5 rounded-2xl bg-slate-950 border border-emerald-500/20 flex items-center gap-6 shadow-[inset_0_0_20px_rgba(16,185,129,0.05)]">
                            <div class="btn btn-sm btn-circle btn-success pointer-events-none shadow-[0_0_15px_rgba(34,197,94,0.4)]">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
                            </div>
                            <div class="space-y-1">
                                <span class="text-[10px] font-orbitron uppercase tracking-[0.2em] text-emerald-400">Sync Status: READY</span>
                                <p class="text-xs text-slate-400 uppercase tracking-widest leading-none">COMMAND Execute: Set Bookmark on NODE_CURRENT. Success.</p>
                            </div>
                        </div>
                    </div>

                    <div class="space-y-8 p-8 rounded-3xl bg-slate-900/20 border border-slate-800 hover:bg-slate-900/30 transition-all">
                        <h3 class="font-orbitron text-sm text-cyan-400 uppercase tracking-widest border-b border-cyan-500/20 pb-4">Protocol Epsilon: Transit Execution</h3>
                        <p class="text-slate-400 text-lg leading-relaxed">
                            Executing a jump (Transit) triggers a sequence of atomic operations synchronized with the jump reactor:
                        </p>
                        <ul class="space-y-4">
                            <li class="flex items-center gap-4 group">
                                <span class="font-orbitron text-[10px] text-cyan-500/50">01.</span>
                                <span class="text-slate-300 font-bold uppercase tracking-widest group-hover:text-cyan-400 transition-colors">Vector Calculation Matrix</span>
                                <div class="h-[1px] flex-1 bg-slate-800"></div>
                            </li>
                            <li class="flex items-center gap-4 group">
                                <span class="font-orbitron text-[10px] text-cyan-500/50">02.</span>
                                <span class="text-slate-300 font-bold uppercase tracking-widest group-hover:text-cyan-400 transition-colors">Fuel Consumption Lock</span>
                                <div class="h-[1px] flex-1 bg-slate-800"></div>
                            </li>
                            <li class="flex items-center gap-4 group">
                                <span class="font-orbitron text-[10px] text-cyan-500/50">03.</span>
                                <span class="text-slate-300 font-bold uppercase tracking-widest group-hover:text-cyan-400 transition-colors">Imperial Time-Link Leap (+7D)</span>
                                <div class="h-[1px] flex-1 bg-slate-800"></div>
                            </li>
                            <li class="flex items-center gap-4 group">
                                <span class="font-orbitron text-[10px] text-cyan-500/50">04.</span>
                                <span class="text-slate-300 font-bold uppercase tracking-widest group-hover:text-cyan-400 transition-colors">Bookmark State Persistence</span>
                                <div class="h-[1px] flex-1 bg-slate-800"></div>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- 4. Advanced Diagnostics -->
            <section id="troubleshooting" class="scroll-mt-24 mt-8">
                <div class="flex items-center gap-4 mb-8">
                    <div class="w-12 h-12 rounded-lg bg-rose-500/10 border border-rose-500/30 flex items-center justify-center font-orbitron text-xl text-rose-500 shadow-[0_0_15px_rgba(244,63,94,0.2)]">04</div>
                    <h2 class="font-orbitron text-2xl font-bold text-white uppercase tracking-[0.2em]">Advanced Diagnostics</h2>
                </div>

                <div class="bg-slate-950 border border-slate-800 rounded-3xl overflow-hidden shadow-2xl">
                    <div class="p-10 border-b border-slate-800 bg-slate-900/40 flex flex-col md:flex-row md:items-center justify-between gap-6">
                        <div class="space-y-2">
                            <div class="flex items-center gap-3">
                                 {% include 'icons/radar.html.twig' with { dim: 20, class: 'text-rose-500 animate-pulse' } %}
                                 <span class="font-orbitron text-xs text-rose-500 uppercase tracking-[0.4em] font-bold">Interrupt: INVALID_JUMP_SEQUENCE</span>
                            </div>
                            <p class="font-rajdhani text-slate-400 text-lg italic">"Interface Integrity Failure: Calculated transit exceed J-X capabilities."</p>
                        </div>
                        <div class="flex gap-2">
                             <span class="px-3 py-1 bg-rose-500/10 border border-rose-500/30 text-rose-500 text-[9px] font-orbitron font-bold uppercase tracking-widest rounded">Priority: HIGH</span>
                             <span class="px-3 py-1 bg-slate-800 border border-slate-700 text-slate-400 text-[9px] font-orbitron font-bold uppercase tracking-widest rounded">Error_Code: 0x822</span>
                        </div>
                    </div>
                    
                    <div class="p-10 font-rajdhani text-slate-400 text-lg leading-relaxed space-y-10">
                        <p>This error state precludes Nav-Link activation. It indicates a physical discrepancy between the navigator's planning and the actual specifications of the jump engine installed on the asset.</p>
                        
                        <div class="space-y-6">
                            <h4 class="font-orbitron text-[11px] text-slate-200 uppercase tracking-[0.3em] flex items-center gap-4">
                                <span class="w-12 h-[1px] bg-cyan-500"></span>
                                Correction Matrix
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 text-sm">
                                <div class="group p-8 rounded-2xl bg-slate-900/50 border border-slate-800 hover:border-cyan-500/30 transition-all hover:bg-slate-900/80">
                                    <div class="w-10 h-10 rounded-lg bg-cyan-500/10 border border-cyan-500/30 flex items-center justify-center text-cyan-400 mb-6 group-hover:scale-110 transition-transform">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v4"/><path d="m4.93 4.93 2.83 2.83"/><path d="M2 12h4"/><path d="m4.93 19.07 2.83-2.83"/><path d="M12 22v-4"/><path d="m19.07 19.07-2.83-2.83"/><path d="M22 12h-4"/><path d="m19.07 4.93-2.83 2.83"/></svg>
                                    </div>
                                    <span class="text-cyan-500 font-bold block mb-4 uppercase text-[11px] tracking-widest">Protocol A: Automated Optimization</span>
                                    <p class="text-slate-400 font-bold leading-relaxed uppercase tracking-tighter text-xs">
                                        Engage the <strong>RECALCULATE</strong> subroutine. The system will query Imperial navigation beacons to automatically inject intermediate refueling nodes into the flight plan.
                                    </p>
                                </div>
                                <div class="group p-8 rounded-2xl bg-slate-900/50 border border-slate-800 hover:border-cyan-500/30 transition-all hover:bg-slate-900/80">
                                    <div class="w-10 h-10 rounded-lg bg-cyan-500/10 border border-cyan-500/30 flex items-center justify-center text-cyan-400 mb-6 group-hover:scale-110 transition-transform">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 8v8"/><path d="M8 12h8"/></svg>
                                    </div>
                                    <span class="text-cyan-500 font-bold block mb-4 uppercase text-[11px] tracking-widest">Protocol B: SAT-LINK Manual Injection</span>
                                    <p class="text-slate-400 font-bold leading-relaxed uppercase tracking-tighter text-xs">
                                        Analyze stellar cartography via the <strong>SAT-LINK</strong> interface. Identify a system suitable for the asset's range and manually insert the node waypoint.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-20 p-10 rounded-3xl bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 border border-slate-800 text-center space-y-6 relative overflow-hidden">
                    <div class="absolute inset-0 bg-cyan-500/5 opacity-5 animate-pulse"></div>
                    <p class="relative font-orbitron text-[11px] text-slate-500 uppercase tracking-[0.5em] font-bold">
                        // SECURE TERMINAL END // ALL DATA COMPLIANT WITH IMPERIAL NAVAL CODE //
                    </p>
                    <div class="relative flex justify-center gap-3">
                         <div class="w-2 h-2 rounded-full bg-slate-800 border border-slate-700"></div>
                         <div class="w-2 h-2 rounded-full bg-cyan-500 animate-pulse shadow-[0_0_8px_rgba(6,182,212,0.6)]"></div>
                         <div class="w-2 h-2 rounded-full bg-slate-800 border border-slate-700"></div>
                    </div>
                </div>
            </section>
        </main>
    </div>
{% endblock %}
