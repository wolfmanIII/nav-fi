{% extends 'base.html.twig' %}
{% import '_tooltip.html.twig' as tooltip %}

{% block title %}Nav-Fi&sup3; - Missions{% endblock %}

{% block pageContent %}

    <div class="">

        {% embed 'components/_hero_header.html.twig' with {
        icon: 'icons/alien-structure-1.html.twig',
        theme: 'emerald',
        subheader: 'Tactical Archive // Mission Logs',
        title: 'MISSION REGISTRY',
        titleSuffix: '// Operations',
        description: 'Track mission progress, session dates, and narrative milestones across the sector.'
    } %}
        {% block actions %}
            <a href="{{ path('app_campaign_new') }}" class="btn btn-outline btn-success btn-sm gap-2 uppercase tracking-wide font-orbitron text-[10px]">
                {% include 'icons/alien-structure-1.html.twig' with { dim: 16 } %}
            </a>
        {% endblock %}
    {% endembed %}

        {% set filter_fields %}
            <div>
                <label class="label text-xs uppercase tracking-[0.2em] text-cyan-500/60 font-bold">MISSION_TITLE</label>
                <input type="text" name="title" value="{{ filters.title }}" class="input w-full bg-slate-950/50 border-slate-800 text-cyan-100 placeholder:text-slate-600 focus:border-cyan-500/50" placeholder="Search by title...">
            </div>
            <div>
                <label class="label text-xs uppercase tracking-[0.2em] text-cyan-500/60 font-bold">START_YEAR</label>
                <input type="text" name="starting_year" value="{{ filters.starting_year }}" class="input w-full bg-slate-950/50 border-slate-800 text-cyan-100 placeholder:text-slate-600 focus:border-cyan-500/50" placeholder="Year...">
            </div>
        {% endset %}
        {% include 'components/index_filters.html.twig' with {
            action: path('app_campaign_index'),
            legend: 'Mission search',
            grid_class: 'md:grid-cols-2',
            fields: filter_fields,
            reset_path: path('app_campaign_index'),
            is_filtered: filters.title or filters.starting_year
        } %}

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            {% if campaigns|length > 0 %}
                {% for campaign in campaigns %}
                    <twig:TacticalCampaignCard :campaign="campaign" />
                {% endfor %}
            {% else %}
                <div class="col-span-full py-20 flex flex-col items-center justify-center rounded-xl border border-dashed border-slate-700 bg-slate-900/50">
                    <div class="text-slate-500 mb-2">{% include 'icons/alien-structure-1.html.twig' with {'dim': 48} %}</div>
                    <p class="text-slate-400 uppercase tracking-widest text-sm mb-6">Archives empty // No missions running</p>
                    <a href="{{ path('app_campaign_new') }}" class="text-emerald-400 hover:text-emerald-300 text-xs font-bold uppercase underline underline-offset-4 decoration-emerald-500/30 transition-colors">Initialize Protocol</a>
                </div>
            {% endif %}
        </div>

            {% include 'components/pagination.html.twig' with {
                pagination: pagination,
                route: 'app_campaign_index',
                query: app.request.query.all
            } %}
            
    </div>
{% endblock %}
