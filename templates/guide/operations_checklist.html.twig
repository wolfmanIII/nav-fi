{% extends 'base.html.twig' %}

{% block title %}Operating Guide (Checklist){% endblock %}

{% block pageContent %}
<div class="min-h-[80vh] space-y-8">
    
    {# HERO SECTION #}
    {% embed 'components/_hero_header.html.twig' with {
        icon: 'icons/operations-checklist.html.twig',
        theme: 'cyan',
        subheader: 'Standard Operating Procedure',
        title: 'Operations Checklist',
        description: 'Follow this flight plan to activate a Traveller mission: session clock, hulls, crews, counterparties, costs, income, mortgages, and the annual budget strip.'
    } %}
        {% block content %}
            <div class="flex flex-wrap gap-2 mt-4">
                {% for tag in ['Mission First', 'Assets & Personnel', 'Companies', 'Costs & Income', 'Mortgage & Amendments', 'Routes', 'Annual Budget', 'DDD/YYYY'] %}
                     <span class="px-3 py-1.5 rounded bg-slate-900 border border-slate-700 text-xs font-bold tracking-wider text-slate-400 uppercase">{{ tag }}</span>
                {% endfor %}
            </div>
        {% endblock %}
    {% endembed %}

    {# GRID #}
    <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        
        {# STEP 1 #}
        <div class="group relative flex flex-col rounded-xl border border-slate-800 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 shadow-lg transition-all hover:border-cyan-500/30 hover:shadow-cyan-500/10 hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <p class="text-[10px] uppercase tracking-[0.25em] text-cyan-500 font-bold bg-cyan-950/20 px-2 py-1 rounded border border-cyan-500/10">Step 01</p>
                <div class="text-cyan-500/50 group-hover:text-cyan-400 transition-colors">
                    {% include 'icons/alien-structure-1.html.twig' with { dim: 20 } %}
                </div>
            </div>
            <h3 class="text-xl font-bold text-slate-100 group-hover:text-cyan-400 transition-colors font-orbitron mb-3">Initialize Mission</h3>
            <p class="text-sm text-slate-400 leading-relaxed">Name the operation, write a brief, and set the session calendar (day/year). <strong class="text-amber-400/80">Referee Authority:</strong> You have total control over the session clock. The system provides advisory alerts for timeline verification but never blocks saves.</p>
             <div class="mt-auto pt-4 flex items-center gap-2 text-[10px] uppercase tracking-widest text-slate-500 font-rajdhani font-bold">
                <span class="w-1.5 h-1.5 rounded-full bg-cyan-500"></span>
                Mission Control
            </div>
        </div>

        {# STEP 2 #}
        <div class="group relative flex flex-col rounded-xl border border-slate-800 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 shadow-lg transition-all hover:border-cyan-500/30 hover:shadow-cyan-500/10 hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <p class="text-[10px] uppercase tracking-[0.25em] text-cyan-500 font-bold bg-cyan-950/20 px-2 py-1 rounded border border-cyan-500/10">Step 02</p>
                <div class="text-cyan-500/50 group-hover:text-cyan-400 transition-colors">
                    {% include 'icons/assets.html.twig' with { dim: 20 } %}
                </div>
            </div>
            <h3 class="text-xl font-bold text-slate-100 group-hover:text-cyan-400 transition-colors font-orbitron mb-3">Register Assets & Accounts</h3>
            <p class="text-sm text-slate-400 leading-relaxed">Enter <strong>Ships, Bases, or Teams</strong>. <strong class="text-emerald-400">Account Strategy:</strong> Manage accounts manually via the dedicated <strong>Financial Accounts</strong> page or use automatic creation (Rapid Method) during the first financial operation.</p>
             <div class="mt-auto pt-4 flex items-center gap-2 text-[10px] uppercase tracking-widest text-slate-500 font-rajdhani font-bold">
                <span class="w-1.5 h-1.5 rounded-full bg-cyan-500"></span>
                Asset & Wallet Registry
            </div>
        </div>

         {# STEP 3 #}
        <div class="group relative flex flex-col rounded-xl border border-slate-800 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 shadow-lg transition-all hover:border-cyan-500/30 hover:shadow-cyan-500/10 hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <p class="text-[10px] uppercase tracking-[0.25em] text-cyan-500 font-bold bg-cyan-950/20 px-2 py-1 rounded border border-cyan-500/10">Step 03</p>
                <div class="text-cyan-500/50 group-hover:text-cyan-400 transition-colors">
                    {% include 'icons/company.html.twig' with { dim: 20 } %}
                </div>
            </div>
            <h3 class="text-xl font-bold text-slate-100 group-hover:text-cyan-400 transition-colors font-orbitron mb-3">Setup Companies</h3>
            <p class="text-sm text-slate-400 leading-relaxed">Add counterparties with roles and tags â€” these companies remain cross-mission, so every new hull or contract can reuse the same provider plus its Local Law baggage.</p>
             <div class="mt-auto pt-4 flex items-center gap-2 text-[10px] uppercase tracking-widest text-slate-500 font-rajdhani font-bold">
                <span class="w-1.5 h-1.5 rounded-full bg-cyan-500"></span>
                Counterparties
            </div>
        </div>

         {# STEP 4 #}
        <div class="group relative flex flex-col rounded-xl border border-slate-800 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 shadow-lg transition-all hover:border-cyan-500/30 hover:shadow-cyan-500/10 hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <p class="text-[10px] uppercase tracking-[0.25em] text-cyan-500 font-bold bg-cyan-950/20 px-2 py-1 rounded border border-cyan-500/10">Step 04</p>
                <div class="text-cyan-500/50 group-hover:text-cyan-400 transition-colors">
                     <span class="animate-spin-slow inline-block">
                        {% include 'icons/radar.html.twig' with { dim: 20 } %}
                    </span>
                </div>
            </div>
            <h3 class="text-xl font-bold text-slate-100 group-hover:text-cyan-400 transition-colors font-orbitron mb-3">Assign Assets to Mission</h3>
            <p class="text-sm text-slate-400 leading-relaxed">Link each asset to the mission so every date tracks the same session clock. The session day/year will drive asset PDFs, mortgages, and contracts automatically.</p>
             <div class="mt-auto pt-4 flex items-center gap-2 text-[10px] uppercase tracking-widest text-slate-500 font-rajdhani font-bold">
                <span class="w-1.5 h-1.5 rounded-full bg-cyan-500"></span>
                Session Sync
            </div>
        </div>

        {# STEP 5 #}
        <div class="group relative flex flex-col rounded-xl border border-slate-800 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 shadow-lg transition-all hover:border-cyan-500/30 hover:shadow-cyan-500/10 hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <p class="text-[10px] uppercase tracking-[0.25em] text-cyan-500 font-bold bg-cyan-950/20 px-2 py-1 rounded border border-cyan-500/10">Step 05</p>
                <div class="text-cyan-500/50 group-hover:text-cyan-400 transition-colors">
                    {% include 'icons/crew.html.twig' with { dim: 20 } %}
                </div>
            </div>
            <h3 class="text-xl font-bold text-slate-100 group-hover:text-cyan-400 transition-colors font-orbitron mb-3">Crew & Payroll</h3>
            <p class="text-sm text-slate-400 leading-relaxed">Add crew, assign bridge roles, and bind people to their assets. <strong class="text-emerald-400">Payroll is automatic:</strong> The system tracks the 28-day Imperial cycle and handles pro-rata calculations for new hires automatically.</p>
             <div class="mt-auto pt-4 flex items-center gap-2 text-[10px] uppercase tracking-widest text-slate-500 font-rajdhani font-bold">
                <span class="w-1.5 h-1.5 rounded-full bg-cyan-500"></span>
                Crew Manifest
            </div>
        </div>

        {# STEP 06 #}
        <div class="group relative flex flex-col rounded-xl border border-slate-800 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 shadow-lg transition-all hover:border-cyan-500/30 hover:shadow-cyan-500/10 hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <p class="text-[10px] uppercase tracking-[0.25em] text-cyan-500 font-bold bg-cyan-950/20 px-2 py-1 rounded border border-cyan-500/10">Step 06 <span class="ml-1 text-emerald-500 opacity-60">v3.0</span></p>
                <div class="text-cyan-500/50 group-hover:text-cyan-400 transition-colors">
                    {% include 'icons/cost.html.twig' with { dim: 20 } %}
                </div>
            </div>
            <h3 class="text-xl font-bold text-slate-100 group-hover:text-cyan-400 transition-colors font-orbitron mb-3">Log Expenses (Costs)</h3>
            <p class="text-sm text-slate-400 leading-relaxed">Record costs per asset. <strong>Smart Context:</strong> Fields appear after Asset selection. You can now define a <strong>New Vendor</strong> directly in the form; the system handles the persistent record creation automatically.</p>
             <div class="mt-auto pt-4 flex items-center gap-2 text-[10px] uppercase tracking-widest text-slate-500 font-rajdhani font-bold">
                <span class="w-1.5 h-1.5 rounded-full bg-cyan-500"></span>
                Maintenance & Logistics
            </div>
        </div>

        {# STEP 07 #}
        <div class="group relative flex flex-col rounded-xl border border-slate-800 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 shadow-lg transition-all hover:border-cyan-500/30 hover:shadow-cyan-500/10 hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <p class="text-[10px] uppercase tracking-[0.25em] text-cyan-500 font-bold bg-cyan-950/20 px-2 py-1 rounded border border-cyan-500/10">Step 07 <span class="ml-1 text-emerald-500 opacity-60">v3.0</span></p>
                <div class="text-cyan-500/50 group-hover:text-cyan-400 transition-colors">
                    {% include 'icons/income.html.twig' with { dim: 20 } %}
                </div>
            </div>
            <h3 class="text-xl font-bold text-slate-100 group-hover:text-cyan-400 transition-colors font-orbitron mb-3">Log Income</h3>
            <p class="text-sm text-slate-400 leading-relaxed">Add income streams. Supports <strong>Hybrid Resolution</strong> for Payer/Alias. Deposits vs Final Payouts are auto-split. XOR integrity ensures you either choose a registered account or define a new one.</p>
             <div class="mt-auto pt-4 flex items-center gap-2 text-[10px] uppercase tracking-widest text-slate-500 font-rajdhani font-bold">
                <span class="w-1.5 h-1.5 rounded-full bg-cyan-500"></span>
                Credits Inflow
            </div>
        </div>

        {# STEP 08 #}
        <div class="group relative flex flex-col rounded-xl border border-slate-800 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 shadow-lg transition-all hover:border-cyan-500/30 hover:shadow-cyan-500/10 hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <p class="text-[10px] uppercase tracking-[0.25em] text-cyan-500 font-bold bg-cyan-950/20 px-2 py-1 rounded border border-cyan-500/10">Step 08 <span class="ml-1 text-emerald-500 opacity-60">v3.0</span></p>
                <div class="text-cyan-500/50 group-hover:text-cyan-400 transition-colors">
                    {% include 'icons/handbook.html.twig' with { dim: 20 } %}
                </div>
            </div>
            <h3 class="text-xl font-bold text-slate-100 group-hover:text-cyan-400 transition-colors font-orbitron mb-3">Setup Mortgages</h3>
            <p class="text-sm text-slate-400 leading-relaxed">For Ships/Bases: set rate and insurance. Form parity ensures that choosing an existing financing account or <strong>creating a new one</strong> is a strictly validated XOR operation.</p>
             <div class="mt-auto pt-4 flex items-center gap-2 text-[10px] uppercase tracking-widest text-slate-500 font-rajdhani font-bold">
                <span class="w-1.5 h-1.5 rounded-full bg-cyan-500"></span>
                Bank Deck
            </div>
        </div>

        {# STEP 9 #}
        <div class="group relative flex flex-col rounded-xl border border-slate-800 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 shadow-lg transition-all hover:border-cyan-500/30 hover:shadow-cyan-500/10 hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <p class="text-[10px] uppercase tracking-[0.25em] text-cyan-500 font-bold bg-cyan-950/20 px-2 py-1 rounded border border-cyan-500/10">Step 09</p>
                <div class="text-cyan-500/50 group-hover:text-cyan-400 transition-colors">
                    {% include 'icons/ship-components.html.twig' with { dim: 20 } %}
                </div>
            </div>
            <h3 class="text-xl font-bold text-slate-100 group-hover:text-cyan-400 transition-colors font-orbitron mb-3">Log Asset Amendments</h3>
            <p class="text-sm text-slate-400 leading-relaxed">Signed assets change only via Amendments. Link each amendment to a technical cost with payment date; that date becomes the effective amendment day/year.</p>
             <div class="mt-auto pt-4 flex items-center gap-2 text-[10px] uppercase tracking-widest text-slate-500 font-rajdhani font-bold">
                <span class="w-1.5 h-1.5 rounded-full bg-cyan-500"></span>
                Dossier Upgrade
            </div>
        </div>

        {# STEP 10 #}
        <div class="group relative flex flex-col rounded-xl border border-slate-800 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 shadow-lg transition-all hover:border-cyan-500/30 hover:shadow-cyan-500/10 hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <p class="text-[10px] uppercase tracking-[0.25em] text-cyan-500 font-bold bg-cyan-950/20 px-2 py-1 rounded border border-cyan-500/10">Step 10</p>
                <div class="text-cyan-500/50 group-hover:text-cyan-400 transition-colors">
                    {% include 'icons/routes.html.twig' with { dim: 20 } %}
                </div>
            </div>
            <h3 class="text-xl font-bold text-slate-100 group-hover:text-cyan-400 transition-colors font-orbitron mb-3">Track Routes</h3>
            <p class="text-sm text-slate-400 leading-relaxed">Define sector waypoints + hex, then validate jump distances and fuel burn. Map links open TravellerMap and start/dest hexes seal the first and last waypoint.</p>
             <div class="mt-auto pt-4 flex items-center gap-2 text-[10px] uppercase tracking-widest text-slate-500 font-rajdhani font-bold">
                <span class="w-1.5 h-1.5 rounded-full bg-cyan-500"></span>
                Plotting Nav
            </div>
        </div>

        {# STEP 11 #}
        <div class="group relative flex flex-col rounded-xl border border-slate-800 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 shadow-lg transition-all hover:border-cyan-500/30 hover:shadow-cyan-500/10 hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <p class="text-[10px] uppercase tracking-[0.25em] text-cyan-500 font-bold bg-cyan-950/20 px-2 py-1 rounded border border-cyan-500/10">Step 11</p>
                <div class="text-cyan-500/50 group-hover:text-cyan-400 transition-colors">
                    {% include 'icons/annual-budget.html.twig' with { dim: 20 } %}
                </div>
            </div>
            <h3 class="text-xl font-bold text-slate-100 group-hover:text-cyan-400 transition-colors font-orbitron mb-3">Build Annual Budget</h3>
            <p class="text-sm text-slate-400 leading-relaxed">For each asset: aggregate income, costs, and payments in the current year and read the balance strip + timeline. Use it to plan the next jump or sector operation.</p>
             <div class="mt-auto pt-4 flex items-center gap-2 text-[10px] uppercase tracking-widest text-slate-500 font-rajdhani font-bold">
                <span class="w-1.5 h-1.5 rounded-full bg-cyan-500"></span>
                Annual Strip
            </div>
        </div>

         {# STEP 12 #}
        <div class="group relative flex flex-col rounded-xl border border-slate-800 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 shadow-lg transition-all hover:border-cyan-500/30 hover:shadow-cyan-500/10 hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <p class="text-[10px] uppercase tracking-[0.25em] text-cyan-500 font-bold bg-cyan-950/20 px-2 py-1 rounded border border-cyan-500/10">Step 12</p>
                <div class="text-cyan-500/50 group-hover:text-cyan-400 transition-colors">
                    {% include 'icons/search.html.twig' with { dim: 20 } %}
                </div>
            </div>
            <h3 class="text-xl font-bold text-slate-100 group-hover:text-cyan-400 transition-colors font-orbitron mb-3">Rapid List Scan</h3>
            <p class="text-sm text-slate-400 leading-relaxed">Use integrated filters and paging on assets, crew, costs, income, mortgages, budgets, missions, and routes to keep the table flowing during play.</p>
             <div class="mt-auto pt-4 flex items-center gap-2 text-[10px] uppercase tracking-widest text-slate-500 font-rajdhani font-bold">
                <span class="w-1.5 h-1.5 rounded-full bg-cyan-500"></span>
                Quick Filters
            </div>
        </div>

        {# STEP 13 #}
        <div class="group relative flex flex-col rounded-xl border border-slate-800 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 shadow-lg transition-all hover:border-cyan-500/30 hover:shadow-cyan-500/10 hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <p class="text-[10px] uppercase tracking-[0.25em] text-cyan-500 font-bold bg-cyan-950/20 px-2 py-1 rounded border border-cyan-500/10">Step 13</p>
                <div class="text-cyan-500/50 group-hover:text-cyan-400 transition-colors">
                    {% include 'icons/pdf.html.twig' with { dim: 20 } %}
                </div>
            </div>
            <h3 class="text-xl font-bold text-slate-100 group-hover:text-cyan-400 transition-colors font-orbitron mb-3">Print Contract PDFs</h3>
            <p class="text-sm text-slate-400 leading-relaxed">When a job is ready, export the contract PDF and keep counterparty and local law visible at the table. Each PDF carries a template version marker for audit and reprints.</p>
             <div class="mt-auto pt-4 flex items-center gap-2 text-[10px] uppercase tracking-widest text-slate-500 font-rajdhani font-bold">
                <span class="w-1.5 h-1.5 rounded-full bg-cyan-500"></span>
                Signed Copy
            </div>
        </div>

    </div>

    {# ADVISORY NOTE #}
    <div class="mt-12 rounded-2xl border border-amber-500/20 bg-amber-500/5 p-6 text-center">
        <h3 class="text-sm font-bold text-amber-100 uppercase tracking-widest mb-2 font-orbitron">/// Advisory Validation System</h3>
        <p class="text-xs text-slate-400 max-w-2xl mx-auto leading-relaxed italic">
            Nav-Fi&sup3; prioritizes narrative flexibility and Referee control. The system provides advisory alerts for data chronology verification, but all records remain fully editable regardless of signed/paid status. The Referee maintains complete authority over data consistency.
        </p>
    </div>
</div>
{% endblock %}
