{% extends 'base.html.twig' %}
{% import '_tooltip.html.twig' as tooltip %}

{% block title %}Nav-Fi&sup3; - Crew{% endblock %}

{% block pageContent %}

    <div class="">

    {% embed 'components/_hero_header.html.twig' with {
        icon: 'icons/crew.html.twig',
        theme: 'indigo',
        subheader: 'NAV-FI // PERSONNEL',
        title: 'CREW',
        titleSuffix: '// Manifest',
        description: 'Roles, captains and shifts ready for undocking, all linked to your assets.'
    } %}
        {% import '_tooltip.html.twig' as tooltip %}
        {% block actions %}
            {{ tooltip.link('Recruit crew member',
                            'Add crew member',
                            'icons/crew.html.twig',
                            path('app_crew_new'),
                            { position: 'tooltip-left', dim: 16, linkClass: 'btn btn-outline btn-primary btn-sm gap-2 font-orbitron text-[10px] tracking-widest uppercase' }) }}
        {% endblock %}
    {% endembed %}



        {% set filter_fields %}
            <div>
                <label class="label text-xs uppercase tracking-[0.2em] text-cyan-500/60 font-bold">CREW_NAME</label>
                <input type="text" name="search" value="{{ filters.search }}" class="input w-full bg-slate-950/50 border-slate-800 text-cyan-100 placeholder:text-slate-600 focus:border-cyan-500/50" placeholder="Search by name...">
            </div>
            <div>
                <label class="label text-xs uppercase tracking-[0.2em] text-cyan-500/60 font-bold">VESSEL_NAV</label>
                <select name="asset" class="select w-full bg-slate-950/50 border-slate-800 text-cyan-100 focus:border-cyan-500/50">
                    <option value="">ANY_VESSEL</option>
                    {% for asset in assets %}
                        <option value="{{ asset.id }}" {% if filters.asset == asset.id %}selected{% endif %}>{{ asset.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label class="label text-xs uppercase tracking-[0.2em] text-cyan-500/60 font-bold">OPS_CAMPAIGN</label>
                <select name="campaign" class="select w-full bg-slate-950/50 border-slate-800 text-cyan-100 focus:border-cyan-500/50">
                    <option value="">ALL_OPERATIONS</option>
                    {% for campaign in campaigns %}
                        <option value="{{ campaign.id }}" {% if filters.campaign == campaign.id %}selected{% endif %}>{{ campaign.title }}</option>
                    {% endfor %}
                </select>
            </div>
        {% endset %}
        {% include 'components/index_filters.html.twig' with {
            form_id: 'crew-filters',
            action: path('app_crew_index'),
            legend: 'Crew search',
            grid_class: 'md:grid-cols-3',
            fields: filter_fields,
            reset_path: path('app_crew_index'),
            is_filtered: filters.search or filters.asset or filters.campaign
        } %}

        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mb-8">
            {% if crew|length > 0 %}
                {% for member in crew %}
                    <twig:TacticalCrewCard :member="member" />
                {% endfor %}
            {% else %}
                <div class="col-span-full py-12 text-center rounded-xl border border-dashed border-slate-700 bg-slate-900/50">
                    <p class="text-slate-500 font-rajdhani tracking-widest uppercase mb-4 text-sm">Manifest is empty // No personnel detected</p>
                    {{ tooltip.link('Recruit crew member',
                                    'Initialize Recruitment',
                                    'icons/crew.html.twig',
                                    path('app_crew_new'),
                                    { dim: 20, linkClass: 'btn btn-primary btn-sm btn-outline' }) }}
                </div>
            {% endif %}
        </div>

            {% include 'components/pagination.html.twig' with {
                pagination: pagination,
                route: 'app_crew_index',
                query: app.request.query.all
            } %}

        </div>
{% endblock %}
