{# templates/asset/_ship_details_form.html.twig #}
{# 
    SCHEMATIC VIEW ORCHESTRATOR 
    Replaces the old linear form with an Interactive Schematic Interface.
    
    Structure:
    - Left/Center: Schematic Overlay (Image + Hotspots)
    - Right: Summary Panel (Read-only stats)
    - Hidden: Modals Container (The actual Form Widgets)
#}

<fieldset class="grid grid-cols-1 lg:grid-cols-4 gap-6 bg-slate-900/40 rounded-xl border border-slate-800 shadow-inner relative pt-8 px-6 pb-6"
     data-controller="asset-details live-summary">
    
    {# LEGEND & HEADER #}
    <legend class="px-3 py-1 rounded bg-slate-800 border border-slate-700 text-[10px] font-bold font-orbitron tracking-[0.3em] text-cyan-500/80 uppercase">
        Ship Schematic // Interactive Mode
    </legend>
    <div class="absolute top-2 right-0 mt-[-10px] mr-4 bg-slate-900 px-2 border border-slate-800 rounded text-[10px] text-slate-500 uppercase font-mono">
        Status: <span class="text-emerald-500 animate-pulse">ONLINE</span>
    </div>

    {# 1. SCHEMATIC OVERLAY (Takes up 3 columns) #}
    <div class="col-span-1 lg:col-span-3 min-h-[300px] md:min-h-[500px] flex items-center justify-center bg-slate-950/20 rounded-lg border border-slate-800/50 relative overflow-hidden group">
        {# Grid Background Effect #}
        <div class="absolute inset-0 bg-[linear-gradient(rgba(6,182,212,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(6,182,212,0.03)_1px,transparent_1px)] bg-[size:40px_40px] pointer-events-none"></div>
        
        {% include 'asset/schematic/_schematic_ship.html.twig' %}
    </div>

    {# 2. SUMMARY PANEL (Takes up 1 column) #}
    <div class="col-span-1 lg:col-span-1">
        {% include 'asset/schematic/_summary_panel.html.twig' %}
    </div>

    {# 3. MODALS CONTAINER (Hidden, contains the actual form widgets) #}
    {% include 'asset/schematic/_modals_container.html.twig' %}
    
    {# Hidden Total Cost Widget (Calculated by JS, stored here for submission) #}
    <div class="hidden">
        {{ form_widget(form.totalCost, { attr: { 'data-asset-details-target': 'totalInput' } }) }}
    </div>

</fieldset>
