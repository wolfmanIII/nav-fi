{% import _self as detailsMacros %}

{% macro render_item(child) %}
    <div class="grid grid-cols-12 gap-2 border border-slate-800 bg-slate-950/40 rounded-lg p-2 relative group hover:border-cyan-500/30 transition-colors items-center collection-item">
        <button type="button"
                class="absolute -right-2 -top-2 w-5 h-5 rounded-full bg-slate-800 border border-slate-700 text-slate-400 hover:text-red-400 hover:border-red-500/50 flex items-center justify-center transition-all shadow-lg z-10 text-xs"
                data-action="asset-details#removeItem">&times;</button>
        
        <div class="col-span-8 md:col-span-6">
            {{ form_widget(child.description, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800 focus:border-cyan-500/50', placeholder: 'Description/Model' } }) }}
        </div>
        <div class="col-span-2 md:col-span-3">
             <div class="flex items-center gap-1">
                 <span class="text-[9px] text-slate-600 font-mono">T:</span>
                {{ form_widget(child.tons, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800 text-right', placeholder: '0' } }) }}
             </div>
        </div>
        <div class="col-span-2 md:col-span-3">
             <div class="flex items-center gap-1">
                <span class="text-[9px] text-slate-600 font-mono">Cr:</span>
                {{ form_widget(child.costMcr, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800 text-right', placeholder: '0', 'data-cost-mcr': '' } }) }}
             </div>
        </div>
    </div>
{% endmacro %}

{% macro render_collection(collection, title, color = 'slate') %}
    <div class="col-span-2 border border-slate-800 bg-slate-900/20 rounded-lg p-3" data-asset-details-target="collection">
        <div class="flex items-center justify-between mb-3 border-b border-slate-800 pb-2">
            <h4 class="text-[10px] uppercase tracking-widest font-orbitron font-bold text-{{ color }}-500/70">{{ title }}</h4>
            <button type="button" class="btn btn-outline btn-xs font-orbitron uppercase tracking-widest text-[9px] h-6 min-h-0 px-2 btn-{{ color }}"
                    data-action="asset-details#addItem">+ Add</button>
        </div>
        <div class="space-y-2" data-asset-details-target="list">
            {% for child in collection %}
                {{ _self.render_item(child) }}
            {% endfor %}
        </div>
        <template data-asset-details-target="prototype">
            {{ _self.render_item(collection.vars.prototype) }}
        </template>
    </div>
{% endmacro %}

<fieldset class="grid grid-cols-2 bg-slate-900/40 border border-slate-800 gap-6 p-6 rounded-xl shadow-inner mb-6 relative"
          data-controller="asset-details">
    <legend class="px-3 py-1 rounded bg-slate-800 border border-slate-700 text-[10px] font-bold font-orbitron tracking-[0.3em] text-cyan-500/80 uppercase">Ship Specifications</legend>

    {# VISUAL SHIP REGISTRY MAPPING #}
    <div class="col-span-2 mb-6 border-b border-slate-800/50 pb-6">
        <div class="relative w-full max-w-3xl mx-auto">
            <div class="relative group">
                {# STARSHIP SCHEMATIC IMAGE #}
                <img src="{{ asset('img/nav-fi-starship.png') }}" 
                     alt="Ship Schematic" 
                     class="w-full h-auto drop-shadow-[0_0_15px_rgba(6,182,212,0.15)]">
                
                {# HUD GRID OVERLAY REMOVED FOR CLARITY #}
                {# <div class="absolute inset-0 bg-[linear-gradient(rgba(6,182,212,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(6,182,212,0.05)_1px,transparent_1px)] bg-[size:40px_40px] opacity-20 pointer-events-none"></div> #}

                {# INTERACTIVE ZONES - COORDINATES TO BE TUNED #}
                
                {# ZONE: BRIDGE (Front/Right typically, placing at 85% width) #}
                <button type="button" 
                        onclick="document.getElementById('section-bridge').scrollIntoView({behavior: 'smooth', block: 'center'}); document.getElementById('section-bridge').classList.add('ring-2', 'ring-cyan-400', 'ring-offset-2', 'ring-offset-slate-900'); setTimeout(() => document.getElementById('section-bridge').classList.remove('ring-2', 'ring-cyan-400', 'ring-offset-2', 'ring-offset-slate-900'), 2000);"
                        class="absolute top-[35%] right-[5%] w-[15%] h-[20%] group/zone hover:bg-cyan-500/10 border border-transparent hover:border-cyan-400/50 rounded-lg transition-all cursor-pointer flex items-center justify-center">
                    <div class="hidden group-hover/zone:block absolute -top-8 bg-slate-900 border border-cyan-500/50 px-2 py-1 text-[9px] font-orbitron text-cyan-400 uppercase tracking-widest whitespace-nowrap z-10 shadow-lg">
                        Bridge // Ops
                    </div>
                </button>

                {# ZONE: ENGINEERING (Rear/Left typically) #}
                <button type="button" 
                        onclick="document.getElementById('section-engineering').scrollIntoView({behavior: 'smooth', block: 'center'}); document.getElementById('section-engineering').classList.add('ring-2', 'ring-amber-400', 'ring-offset-2', 'ring-offset-slate-900'); setTimeout(() => document.getElementById('section-engineering').classList.remove('ring-2', 'ring-amber-400', 'ring-offset-2', 'ring-offset-slate-900'), 2000);"
                        class="absolute top-[30%] left-[5%] w-[20%] h-[40%] group/zone hover:bg-amber-500/10 border border-transparent hover:border-amber-400/50 rounded-lg transition-all cursor-pointer flex items-center justify-center">
                    <div class="hidden group-hover/zone:block absolute -top-8 bg-slate-900 border border-amber-500/50 px-2 py-1 text-[9px] font-orbitron text-amber-400 uppercase tracking-widest whitespace-nowrap z-10 shadow-lg">
                        Engineering
                    </div>
                </button>

                {# ZONE: CARGO (Mid-Rear) #}
                <button type="button" 
                        onclick="document.getElementById('section-cargo').scrollIntoView({behavior: 'smooth', block: 'center'}); document.getElementById('section-cargo').classList.add('ring-2', 'ring-emerald-400', 'ring-offset-2', 'ring-offset-slate-900'); setTimeout(() => document.getElementById('section-cargo').classList.remove('ring-2', 'ring-emerald-400', 'ring-offset-2', 'ring-offset-slate-900'), 2000);"
                        class="absolute top-[40%] left-[30%] w-[25%] h-[30%] group/zone hover:bg-emerald-500/10 border border-transparent hover:border-emerald-400/50 rounded-lg transition-all cursor-pointer flex items-center justify-center">
                    <div class="hidden group-hover/zone:block absolute -top-8 bg-slate-900 border border-emerald-500/50 px-2 py-1 text-[9px] font-orbitron text-emerald-400 uppercase tracking-widest whitespace-nowrap z-10 shadow-lg">
                        Cargo & Fuel
                    </div>
                </button>

                {# ZONE: ACCOMMODATION (Mid-Front) #}
                <button type="button" 
                        onclick="document.getElementById('section-cargo').scrollIntoView({behavior: 'smooth', block: 'center'});"
                        class="absolute top-[25%] left-[55%] w-[20%] h-[25%] group/zone hover:bg-purple-500/10 border border-transparent hover:border-purple-400/50 rounded-lg transition-all cursor-pointer flex items-center justify-center">
                    <div class="hidden group-hover/zone:block absolute -top-8 bg-slate-900 border border-purple-500/50 px-2 py-1 text-[9px] font-orbitron text-purple-400 uppercase tracking-widest whitespace-nowrap z-10 shadow-lg">
                        Deck & Crew
                    </div>
                </button>

                 {# ZONE: WEAPONS (Top) #}
                <button type="button" 
                        onclick="document.getElementById('section-weapons').scrollIntoView({behavior: 'smooth', block: 'center'}); document.getElementById('section-weapons').classList.add('ring-2', 'ring-red-400', 'ring-offset-2', 'ring-offset-slate-900'); setTimeout(() => document.getElementById('section-weapons').classList.remove('ring-2', 'ring-red-400', 'ring-offset-2', 'ring-offset-slate-900'), 2000);"
                        class="absolute top-[10%] left-[40%] w-[30%] h-[15%] group/zone hover:bg-red-500/10 border border-transparent hover:border-red-400/50 rounded-lg transition-all cursor-pointer flex items-center justify-center">
                    <div class="hidden group-hover/zone:block absolute -top-8 bg-slate-900 border border-red-500/50 px-2 py-1 text-[9px] font-orbitron text-red-400 uppercase tracking-widest whitespace-nowrap z-10 shadow-lg">
                        Hardpoints
                    </div>
                </button>
            </div>
            
            <div class="flex justify-center gap-4 mt-2">
                 <div class="text-[9px] font-mono text-slate-500 uppercase tracking-widest flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full border border-cyan-500/50 bg-cyan-500/20"></span> Interactive Schematic
                 </div>
            </div>
        </div>
    </div>
    
    <div class="col-span-2">
        <div class="alert alert-info alert-outline border-cyan-500/50 bg-cyan-950/30 mb-6">
            <div class="flex items-center gap-3">
                 <div class="text-cyan-500">
                    {% include 'icons/ship-components.html.twig' %}
                </div>
                <div>
                     <div class="text-[10px] font-rajdhani uppercase tracking-widest font-bold text-cyan-500 mb-1">
                        Core Components Registry
                   </div>
                   <div class="text-sm text-cyan-100 font-light">
                        Verified specifications. Tech Level and Total Cost are summarized here.
                   </div>
                </div>
            </div>
        </div>
    </div>

    {# Top Bar: Tech Level & Total Cost #}
    <div class="col-span-2 grid grid-cols-2 gap-4 mb-2">
        <div>
             {{ form_label(form.techLevel, null, { label_attr: { class: 'mb-1 text-slate-400 text-[10px] uppercase tracking-widest font-bold font-orbitron' } }) }}
             {{ form_widget(form.techLevel, { attr: { class: 'input input-bordered input-sm w-full bg-slate-950/50 border-slate-800 focus:border-cyan-500/50' } }) }}
        </div>
        <div>
             {{ form_label(form.totalCost, null, { label_attr: { class: 'mb-1 text-slate-400 text-[10px] uppercase tracking-widest font-bold font-orbitron' } }) }}
             <div class="w-full">
                 {{ form_widget(form.totalCost, { attr: { class: 'input input-bordered input-sm w-full bg-slate-950/20 border-slate-800 text-cyan-400 font-mono cursor-not-allowed', 'data-asset-details-target': 'totalInput', 'readonly': 'readonly' } }) }}
                 <p class="text-[9px] text-slate-500 mt-1 leading-tight">
                    <span class="text-cyan-600 font-bold">AUTO-CALCULATED.</span> Sum of all components (MCr). Does NOT affect Asset Price.
                 </p>
             </div>
        </div>
    </div>

    {# Hull Section #}
    <div class="col-span-2 md:col-span-1 border border-slate-700 bg-slate-950/40 rounded-lg p-4 group hover:border-cyan-500/30 transition-colors">
        <div class="flex items-center gap-2 mb-3 border-b border-slate-800 pb-2">
            <span class="text-[10px] uppercase tracking-widest font-orbitron font-bold text-cyan-500/70">{{ form.hull.vars.label }}</span>
        </div>
        <div class="grid grid-cols-1 gap-3">
             <div>
                {{ form_label(form.hull.description, 'Description', { label_attr: { class: 'mb-1 text-slate-400 text-[10px] uppercase tracking-widest font-bold font-orbitron' } }) }}
                {{ form_widget(form.hull.description, { attr: { class: 'input input-bordered input-sm w-full bg-slate-950/50 border-slate-800' } }) }}
            </div>
             <div class="grid grid-cols-2 gap-3">
                 <div>
                    {{ form_label(form.hull.configuration, 'Config Class', { label_attr: { class: 'mb-1 text-slate-400 text-[10px] uppercase tracking-widest font-bold font-orbitron' } }) }}
                    {{ form_widget(form.hull.configuration, { attr: { class: 'input input-bordered input-sm w-full bg-slate-950/50 border-slate-800' } }) }}
                </div>
                 <div>
                    {{ form_label(form.hull.tons, 'Tonnage', { label_attr: { class: 'mb-1 text-slate-400 text-[10px] uppercase tracking-widest font-bold font-orbitron' } }) }}
                    {{ form_widget(form.hull.tons, { attr: { class: 'input input-bordered input-sm w-full bg-slate-950/50 border-slate-800' } }) }}
                </div>
            </div>
            <div class="grid grid-cols-2 gap-3">
                 <div>
                    {{ form_label(form.hull.points, 'Struct. Points', { label_attr: { class: 'mb-1 text-slate-400 text-[10px] uppercase tracking-widest font-bold font-orbitron' } }) }}
                    {{ form_widget(form.hull.points, { attr: { class: 'input input-bordered input-sm w-full bg-slate-950/50 border-slate-800' } }) }}
                </div>
                <div>
                     {{ form_label(form.hull.costMcr, 'Cost (MCr)', { label_attr: { class: 'mb-1 text-slate-400 text-[10px] uppercase tracking-widest font-bold font-orbitron' } }) }}
                    {{ form_widget(form.hull.costMcr, { attr: { class: 'input input-bordered input-sm w-full bg-slate-950/50 border-slate-800', 'data-cost-mcr': '' } }) }}
                </div>
            </div>
        </div>
    </div>

    {# Drives Section #}
    <div id="section-engineering" class="col-span-2 md:col-span-1 border border-slate-700 bg-slate-950/40 rounded-lg p-4 group hover:border-cyan-500/30 transition-colors">
        <div class="flex items-center gap-2 mb-3 border-b border-slate-800 pb-2">
            <span class="text-[10px] uppercase tracking-widest font-orbitron font-bold text-amber-500/70">Engineering</span>
        </div>
        
        {# J-Drive #}
        {% if form.jDrive is defined %}
        <div class="mb-4">
             <div class="text-xs font-bold text-slate-400 uppercase font-orbitron mb-1">Jump Drive</div>
             <div class="grid grid-cols-12 gap-2">
                 <div class="col-span-3">
                     {{ form_label(form.jDrive.rating, 'Rating', { label_attr: { class: 'block mb-1 text-[9px] uppercase text-slate-500' } }) }}
                     {{ form_widget(form.jDrive.rating, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800' } }) }}
                 </div>
                 <div class="col-span-3">
                     {{ form_label(form.jDrive.tons, 'Tons', { label_attr: { class: 'block mb-1 text-[9px] uppercase text-slate-500' } }) }}
                     {{ form_widget(form.jDrive.tons, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800' } }) }}
                 </div>
                 <div class="col-span-3">
                     {{ form_label(form.jDrive.costMcr, 'MCr', { label_attr: { class: 'block mb-1 text-[9px] uppercase text-slate-500' } }) }}
                     {{ form_widget(form.jDrive.costMcr, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800', 'data-cost-mcr': '' } }) }}
                 </div>
                 <div class="col-span-12 mt-1">
                     {{ form_widget(form.jDrive.description, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800', placeholder: 'Description/Model' } }) }}
                 </div>
             </div>
        </div>
        {% endif %}

        {# M-Drive #}
        {% if form.mDrive is defined %}
        <div class="mb-4">
             <div class="text-xs font-bold text-slate-400 uppercase font-orbitron mb-1">Maneuver Drive</div>
             <div class="grid grid-cols-12 gap-2">
                 <div class="col-span-3">
                     {{ form_label(form.mDrive.rating, 'Rating', { label_attr: { class: 'block mb-1 text-[9px] uppercase text-slate-500' } }) }}
                     {{ form_widget(form.mDrive.rating, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800' } }) }}
                 </div>
                 <div class="col-span-3">
                     {{ form_label(form.mDrive.tons, 'Tons', { label_attr: { class: 'block mb-1 text-[9px] uppercase text-slate-500' } }) }}
                     {{ form_widget(form.mDrive.tons, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800' } }) }}
                 </div>
                 <div class="col-span-3">
                     {{ form_label(form.mDrive.costMcr, 'MCr', { label_attr: { class: 'block mb-1 text-[9px] uppercase text-slate-500' } }) }}
                     {{ form_widget(form.mDrive.costMcr, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800', 'data-cost-mcr': '' } }) }}
                 </div>
                 <div class="col-span-12 mt-1">
                     {{ form_widget(form.mDrive.description, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800', placeholder: 'Description/Model' } }) }}
                 </div>
             </div>
        </div>
        {% endif %}

        {# Power Plant #}
        <div>
             <div class="text-xs font-bold text-slate-400 uppercase font-orbitron mb-1">Power Plant</div>
             <div class="grid grid-cols-12 gap-2">
                 <div class="col-span-3">
                     {{ form_label(form.powerPlant.rating, 'Output', { label_attr: { class: 'block mb-1 text-[9px] uppercase text-slate-500' } }) }}
                     {{ form_widget(form.powerPlant.rating, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800' } }) }}
                 </div>
                 <div class="col-span-3">
                     {{ form_label(form.powerPlant.tons, 'Tons', { label_attr: { class: 'block mb-1 text-[9px] uppercase text-slate-500' } }) }}
                     {{ form_widget(form.powerPlant.tons, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800' } }) }}
                 </div>
                 <div class="col-span-3">
                     {{ form_label(form.powerPlant.costMcr, 'MCr', { label_attr: { class: 'block mb-1 text-[9px] uppercase text-slate-500' } }) }}
                     {{ form_widget(form.powerPlant.costMcr, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800', 'data-cost-mcr': '' } }) }}
                 </div>
                 <div class="col-span-12 mt-1">
                     {{ form_widget(form.powerPlant.description, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800', placeholder: 'Description/Model' } }) }}
                 </div>
             </div>
        </div>
    </div>

    {# Fuel Section #}
    {% if form.fuel is defined %}
    <div id="section-fuel" class="col-span-2 border border-slate-700 bg-slate-950/40 rounded-lg p-4 group hover:border-cyan-500/30 transition-colors">
         <div class="flex items-center gap-2 mb-3 border-b border-slate-800 pb-2">
            <span class="text-[10px] uppercase tracking-widest font-orbitron font-bold text-emerald-500/70">Fuel Systems</span>
        </div>
        <div class="flex items-end gap-4">
             <div class="w-1/4">
                 {{ form_label(form.fuel.tons, 'Capacity (Tons)', { label_attr: { class: 'mb-1 text-slate-400 text-[10px] uppercase tracking-widest font-bold font-orbitron' } }) }}
                {{ form_widget(form.fuel.tons, { attr: { class: 'input input-bordered input-sm w-full bg-slate-950/50 border-slate-800 focus:border-cyan-500/50' } }) }}
            </div>
            <div class="flex-1">
                 {{ form_label(form.fuel.description, 'Notes', { label_attr: { class: 'mb-1 text-slate-400 text-[10px] uppercase tracking-widest font-bold font-orbitron' } }) }}
                {{ form_widget(form.fuel.description, { attr: { class: 'input input-bordered input-sm w-full bg-slate-950/50 border-slate-800 focus:border-cyan-500/50' } }) }}
            </div>
             <div class="w-1/6">
                 {{ form_label(form.fuel.costMcr, 'Cost (MCr)', { label_attr: { class: 'mb-1 text-slate-400 text-[10px] uppercase tracking-widest font-bold font-orbitron' } }) }}
                {{ form_widget(form.fuel.costMcr, { attr: { class: 'input input-bordered input-sm w-full bg-slate-950/50 border-slate-800 focus:border-cyan-500/50', 'data-cost-mcr': '' } }) }}
            </div>
        </div>
    </div>
    {% endif %}

    {# Operational Section #}
    <div id="section-bridge" class="col-span-2 md:col-span-1 border border-slate-700 bg-slate-950/40 rounded-lg p-4 group hover:border-cyan-500/30 transition-colors">
        <div class="flex items-center gap-2 mb-3 border-b border-slate-800 pb-2">
            <span class="text-[10px] uppercase tracking-widest font-orbitron font-bold text-cyan-500/70">Operational & bridge</span>
        </div>
        <div class="space-y-4">
            {# Bridge #}
            <div>
                 <div class="text-xs font-bold text-slate-400 uppercase font-orbitron mb-1">{{ form.bridge.vars.label }}</div>
                 <div class="grid grid-cols-12 gap-2">
                     <div class="col-span-8">
                         {{ form_widget(form.bridge.description, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800', placeholder: 'Type' } }) }}
                     </div>
                     <div class="col-span-2">
                         {{ form_widget(form.bridge.tons, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800', placeholder: 'Tons' } }) }}
                     </div>
                     <div class="col-span-2">
                         {{ form_widget(form.bridge.costMcr, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800', placeholder: 'MCr', 'data-cost-mcr': '' } }) }}
                     </div>
                 </div>
            </div>
            {# Computer #}
            <div>
                 <div class="text-xs font-bold text-slate-400 uppercase font-orbitron mb-1">Computer</div>
                 <div class="grid grid-cols-12 gap-2">
                     <div class="col-span-8">
                         {{ form_widget(form.computer.description, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800', placeholder: 'Model/Rat' } }) }}
                     </div>
                     <div class="col-span-2">
                         {{ form_widget(form.computer.tons, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800', placeholder: 'Tons' } }) }}
                     </div>
                     <div class="col-span-2">
                         {{ form_widget(form.computer.costMcr, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800', placeholder: 'MCr', 'data-cost-mcr': '' } }) }}
                     </div>
                 </div>
            </div>
             {# Sensors #}
            <div>
                 <div class="text-xs font-bold text-slate-400 uppercase font-orbitron mb-1">Sensors</div>
                 <div class="grid grid-cols-12 gap-2">
                     <div class="col-span-8">
                         {{ form_widget(form.sensors.description, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800', placeholder: 'Type/DM' } }) }}
                     </div>
                     <div class="col-span-2">
                         {{ form_widget(form.sensors.tons, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800', placeholder: 'Tons' } }) }}
                     </div>
                     <div class="col-span-2">
                         {{ form_widget(form.sensors.costMcr, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800', placeholder: 'MCr', 'data-cost-mcr': '' } }) }}
                     </div>
                 </div>
            </div>
             {# Software Collection #}
            {{ detailsMacros.render_collection(form.software, 'Software', 'cyan') }}
        </div>
    </div>


    {# Accommodation & Cargo #}
    <div id="section-cargo" class="col-span-2 md:col-span-1 border border-slate-700 bg-slate-950/40 rounded-lg p-4 group hover:border-cyan-500/30 transition-colors">
        <div class="flex items-center gap-2 mb-3 border-b border-slate-800 pb-2">
            <span class="text-[10px] uppercase tracking-widest font-orbitron font-bold text-emerald-500/70">Payload & Accommodation</span>
        </div>
        
         <div class="space-y-4">
             {# Cargo #}
            <div>
                 <div class="text-xs font-bold text-slate-400 uppercase font-orbitron mb-1">{{ form.cargo.vars.label }}</div>
                 <div class="grid grid-cols-12 gap-2">
                     <div class="col-span-8">
                         {{ form_widget(form.cargo.description, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800', placeholder: 'Main Hold' } }) }}
                     </div>
                     <div class="col-span-2">
                         {{ form_widget(form.cargo.tons, { attr: { class: 'input input-bordered input-xs w-full bg-slate-950/50 border-slate-800', placeholder: 'Tons' } }) }}
                     </div>
                     <div class="col-span-2"></div>
                 </div>
            </div>

             {# Staterooms Collection #}
             {{ detailsMacros.render_collection(form.staterooms, 'Staterooms / Berths', 'emerald') }}
             
             {# Common Areas Collection #}
             {{ detailsMacros.render_collection(form.commonAreas, 'Common Areas', 'emerald') }}
         </div>
    </div>

    {# Systems & Weapons #}
    <div id="section-weapons" class="col-span-2 grid grid-cols-2 gap-4">
        {{ detailsMacros.render_collection(form.weapons, 'Hardpoints & Weapons', 'red') }}
        {{ detailsMacros.render_collection(form.systems, 'Systems & Equipment', 'amber') }}
    </div>

    {# Craft #}
    <div class="col-span-2">
        {{ detailsMacros.render_collection(form.craft, 'Craft & Vehicles', 'purple') }}
    </div>

</fieldset>
